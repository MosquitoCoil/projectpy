{% extends 'base.html' %} {% block title %}List of Users{% endblock %} {% block
content %} {% with messages = get_flashed_messages(with_categories=true) %} {%
if messages %} {% for category, message in messages %}
<div class="flash-message {{ category }}">
  {{ message }} {% endfor %} {% endif %} {% endwith %}
</div>
<h2>List of Registered Users</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Firstname</th>
      <th>Lastname</th>
      <th>Email (Username)</th>
      <th>Created At</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user.id }}</td>
      <td>{{ user.firstname }}</td>
      <td>{{ user.lastname }}</td>
      <td>{{ user.username }}</td>
      <td>{{ user.timecreated }}</td>
      <td>
        <a href="{{ url_for('edit.edit_user', user_id=user.id) }}">Edit</a> |
        <a
          href="{{ url_for('delete.delete_user', user_id=user.id) }}"
          onclick="return confirm('Delete this user?')"
          >Delete</a
        >
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<a href="{{ url_for('login.logout')}}">logout</a>
{% endblock %} {% block extra_script %}
<script>
  window.addEventListener("DOMContentLoaded", function () {
    const flashMessages = document.querySelectorAll(".flash-message");
    flashMessages.forEach((msg) => {
      setTimeout(() => {
        msg.style.opacity = "0";
        setTimeout(() => msg.remove(), 500); // Remove after fade-out
      }, 3000); // Disappear after 3 seconds
    });
  });
</script>
{% endblock %}
